@using jrt.jcgl.Localization
<div ng-controller="common.views.makingproductions.index as vm">
    <div class="row margin-bottom-5">
        <div class="col-xs-6">
            <div class="page-head">
                <div class="page-title">
                    <h1>
                        <span>@L("MakingProductions")</span>
                    </h1>
                </div>
            </div>
        </div>
    </div>
    <div class="portlet light">
        <div class="portlet-title portlet-title-filter">
            <div class="inputs inputs-full-width">
                <div class="portlet-input">
                    <div class="form">
                        <form name="makingProductionForm" role="form" novalidate class="form-validation">
                            <div class="row">
                                <div class="col-lg-4">
                                    <div class="form-group">
                                        <label class="control-label">@L("Production.Demand")</label>
                                        <input type="number" class="form-control" ng-model="vm.value" required>
                                    </div>
                                </div>
                                <div class="col-lg-4">
                                    <div class="form-group">
                                        <label class="control-label">@L("Production.StartDate")</label>
                                        <input type="date" class="form-control" ng-model="vm.startdate" placeholder="yyyy-MM-dd" required>
                                    </div>
                                </div>
                                <div class="col-lg-4">
                                    <div class="form-group form-md-line-input form-md-floating-label no-hint">
                                        <select class="form-control" ng-model="vm.type_selcet"
                                                ng-options="opt.name for opt in vm.types track by opt.value"
                                                ui-options='{ iconBase: "fa", tickIcon: "fa fa-check" }'
                                                required></select>
                                        <label>@L("Schedulings.Type")</label>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-lg-12">
                                    <div class="portlet-input">
                                        <div class="row">
                                            <div class="col-xs-2" style="padding-top:20px;">
                                                <button class="btn btn-warning yellow" ng-click="vm.addorganzation()"><i class="fa fa-plus"></i> 添加生产线</button>
                                            </div>
                                        </div>
                                        <div class="form-group form-md-line-input inputs no-hint" ng-repeat="item in vm.organzations">
                                            <div class="input-group">
                                                <input ng-model="item.name"
                                                       auto-focus
                                                       readonly
                                                       class="form-control"
                                                       placeholder="@L("StockLog.HandleUserName")"
                                                       style="300px;"
                                                       type="text" required>
                                                <div class="input-group-btn">
                                                    <buttona ng-click="vm.deleteorganzation(item.name)" class="btn btn-xs btn-primary">
                                                        <i class="fa fa-minus"></i> 删除
                                                    </buttona>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>

                    <div class="form-group" style="margin-bottom:0px;padding-top:24px;">
                        <button class="btn btn-primary blue" ng-click="vm.createProductionPlan()" ng-disabled="makingProductionForm.$invalid||vm.organzations==0"><i class="fa fa-save"></i> @L("Production.Create")</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>